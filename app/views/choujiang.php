<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta content="width=device-width,minimum-scale=1.0,maximum-scale=1.0" name="viewport" /><meta name="apple-mobile-web-app-capable" content="yes" /><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta content="telephone=no" name="format-detection" /><title>魅尔吧 - 大转盘</title>  <style type="text/css"><!--  body{padding: 0;background-color: white;font-family:"Microsoft Yahei","宋体","Tahoma",Arial;font-size:14px;margin-top:20px;}#container{width:300px;margin:auto; padding: 10px auto;background-color:white;}.ly-plate{position:relative;width:300px;height:300px;margin: 0px auto;}.rotate-bg{width:300px; height:300px; background:url(images/ly-plate.jpg); position:absolute; top:0; left:0 }.ly-plate div.lottery-star{width:60px; height:60px; position:absolute; top:43px; left:45px; outline:none }.ly-plate div.lottery-star #lotteryBtn{cursor: pointer; position: absolute; top:0; left:0; width: 210px; *left:-107px }.content{margin: 20px 0; padding-left: 30px; font-size: 12px}.title{font-weight: bold; font-size: 16px;}</style></head><body>	<div id="container">		<div class="ly-plate">			<div class="rotate-bg"></div>			<div class="lottery-star"><img src="images/rotate-static.png" id="lotteryBtn"></div>		</div>		<div class="content">			<div class="title">幸运大转盘活动规则</div>			<p>一、	每人每天有三次抽奖机会；</p>			<p>二、	中奖后在当天不能再继续抽奖；</p>			<p>三、	代金券仅限当天使用，不可兑现，不设找零；</p>			<p>四、	代金券仅适合微信外卖，不适合堂食及外带；</p>			<p>五、	不可与其他优惠同时使用；</p>			<p>六、	活动最终解释权归魅尔吧所有</p>		</div>	</div></body><script src="static/jquery-1.7.2.min.js"></script><script src="static/jQueryRotate.2.2.js"></script><script src="static/jquery.easing.min.js"></script><script>$(function(){	// var timeOut = function(){  //超时函数	// 	$("#lotteryBtn").rotate({	// 		angle:0, 	// 		duration: 10000, 	// 		animateTo: 2160, //这里是设置请求超时后返回的角度，所以应该还是回到最原始的位置，2160是因为我要让它转6圈，就是360*6得来的	// 		callback:function(){	// 			alert('网络超时')	// 		}	// 	}); 	// }; 	// var rotateFunc = function(awards,angle,text){  //awards:奖项，angle:奖项对应的角度	// 	$('#lotteryBtn').stopRotate();	// 	$("#lotteryBtn").rotate({	// 		angle:0, 	// 		duration: 5000, 	// 		animateTo: angle+1440, //angle是图片上各奖项对应的角度，1440是我要让指针旋转4圈。所以最后的结束的角度就是这样子^^	// 		callback:function(){	// 			alert(text)	// 		}	// 	}); 	// };		$("#lotteryBtn").rotate({ 	   bind: 		 { 			click: function(){		        lottery(); 			}		 } 	   	});	});var lasta = 0;function lottery(){     $.ajax({         type: 'POST',         url: 'lottery',         dataType: 'json',         cache: false,         error: function(){             alert('出错了！');             return false;         },         success:function(json){         	if(json.err != undefined) {            	alert(json.err);            	return false;            }            //$("#lotteryBtn").unbind('click').css("cursor","default");             var a = json.angle; //角度 95 + 360 - 145 = 215+95=310             lasta = json.angle;            var p = json.prize; //奖项             $("#lotteryBtn").rotate({                 duration:3000, //转动时间                 angle: 0,                 animateTo:1440+parseInt(a), //转动角度                 easing: $.easing.easeOutSine,                 callback: function(){                 	if(p == 0){						var con = confirm('手气不太好哦！没有关系，再来一次？'); 	                    if(con){ 	                        lottery(); 	                    }else{ 	                        return false; 	                    }                	}else{                		alert('恭喜您抽中了 ' + p + '元代金券！请在今天内点餐，下单结算时系统将会自动抵扣。')                	}                                     }             });         }     }); } </script></html>